1
00:00:00,160 --> 00:00:29,960
嗨各位，我最近在 netninja.dev 發布了一個新的 Claude Code 大師課程，
這是深入探索 Claude Code 以及我如何在自己專案中使用它的課程。
我想在 YouTube 上傳一個小預覽，所以決定釋出一個小章節，
內容關於如何設置和使用自訂的規格驅動工作流程。
我認為這個小章節本身就很完整，
而且這也是一個適用於各種 AI 程式工具的好工作方式，
不只是 Claude Code，所以我想分享給大家。
如果你喜歡這個免費的小章節，你

2
00:00:30,040 --> 00:00:48,080
如果你想更深入了解這個流程、深入探索 Claude Code 與代理工作流程，
請務必到 netninja.dev 網站購買完整的大師課程。
售價 15 美元，但你可以在結帳時使用優惠碼 ClaudeNinja 享受五折優惠。
我會把連結留在影片下方，現在就直接進入內容。

3
00:00:53,600 --> 00:01:23,440
好的，各位朋友大家好，歡迎來到全新的章節。
在這個章節中，我要與大家分享一個我在使用 Claude Code 開發專案時喜歡的工作流程。
那就是規格驅動開發工作流程——我們為任何新功能建立一個高層次的非技術性規格，
然後根據該規格建立詳細的技術開發計畫，
最後用這個計畫來實作功能。
使用這樣的工作流程，我發現它能讓模型更專注於任務，
並將對任何正在開發的功能的猜測

4
00:01:23,840 --> 00:01:53,520
或錯誤假設降到最低。
這種規格優先工作流程的靈感來自 GitHub 的一個工具叫做 Spec Kit，
它非常強調以高層次規格作為 AI 驅動開發的核心。
但就個人而言，作為一個喜歡親力親為、
始終處於開發循環中的開發者，
我覺得 Spec Kit 讓我感覺與整個新增功能的流程有點太脫節了。
所以我簡化了那個流程，

5
00:01:53,720 --> 00:02:04,200
設計了自己的輕量化且更簡單的方法，
讓我更容易加入自己的想法並管理整個流程。
因此，這樣做將很多的主導權還給了我這個開發者。

6
00:02:05,080 --> 00:02:35,000
在整個章節中，我們將把所有東西整合在一起來實作這個規格驅動工作流程。
首先，我們會建立一個新的自訂斜線指令，
幫助我們自動化為新功能生成高層次非技術性規格的過程。
之後，我們將使用 Claude Code 的內建規劃模式來制定詳細的技術計畫。
最後，我們將使用 Claude Code 的延伸思考模式搭配 Opus 模型來實作這些計畫。
這就是這個工作流程的三個核心步驟，
也是我們在這個章節中要重點關注的內容。

7
00:02:35,600 --> 00:03:04,000
規格化一個新功能、計畫功能，然後實作計畫。
你也可以在這個循環的最後加入一個審查步驟，
在功能實作完成後審查程式碼，
但那是我們在後續章節要探討的內容，現在先專注在前三個步驟。
我也會將 Git 整合進工作流程，
這樣每次我們開始一個新的規格或功能時，Claude Code 都會切換到一個新的分支。
這樣的話，如果事情出了差錯，我們只需刪除那個分支，
主程式碼庫就不會受到任何影響。

8
00:03:05,200 --> 00:03:28,880
我強烈建議在使用 AI 修改程式碼時搭配 Git 和 GitHub，
因為沒有它們的話，事情很快就會變得非常混亂。
如果你是版本控制的新手，想要學習相關知識，
我有一個很完整的 Git 和 GitHub 大師課程可以參考，
我會把連結留在影片下方。
無論如何，讓我們開始這個工作流程，
首先建立一個新的自訂 / 指令來生成規格。

9
00:03:29,400 --> 00:03:59,320
好的，現在我們了解了這個規格驅動工作流程的整體流程。
讓我們開始建立一個新的 spec 指令。
這個 spec 指令會為我們做幾件事。
第一，它會根據我們提供給指令的輸入或參數生成功能名稱和分支名稱。
第二，它會切換到一個以生成名稱命名的新分支。
然後，它會根據我們的輸入建立一個高層次的功能規格，
並將該規格寫入 specs 資料夾中的一個檔案。
而這個規格

10
00:03:59,520 --> 00:04:16,560
就像我之前提到的，將會是一個高層次的規格，
意思是它不應該從技術角度過多說明功能應該如何實作，
而是要專注於更宏觀的角度，
描述功能從使用者角度來看應該如何運作，
包含任何邊緣情況和更廣泛的影響。

11
00:04:17,560 --> 00:04:30,800
那麼，讓我們開始建立這個新的 spec 指令，
打開 .claude 目錄中的 commands 資料夾，
然後建立一個新檔案叫做 spec.md，
這意味著之後執行指令時，我們要輸入斜線 spec。

12
00:04:31,800 --> 00:05:01,720
好的，現在我們可以開始充實這個檔案了。
我想做的第一件事，就像我們建立的所有其他指令一樣，
是在頂部為指令描述和允許的工具加上前置資料（frontmatter），
還要加上一個參數提示。
讓我們從三個破折號開始，放在這個前置資料區塊的兩側。
在這些破折號內，我要貼入三個不同的鍵值對。
描述部分說的是「從簡短的想法建立功能規格檔案和分支」，
參數提示是

13
00:05:01,920 --> 00:05:20,320
「簡短的功能描述」，以及允許的工具，
包括 read、write、glob 和 bash，用於切換到新分支。
這樣前置資料就設置好了，
現在我們只需要寫出指令本身的內容。
我不打算從頭開始一個字一個字打，
而是直接貼上然後一步一步帶你們看。

14
00:05:21,240 --> 00:05:49,920
順帶一提，就像我之前提到的，
你可以從課程檔案的 GitHub 儲存庫中取得這整個指令。
你只需要從上面的下拉選單中選擇 Claude snippets 分支，
然後進入 commands 資料夾，
在那裡你會看到這個 spec 指令以及我們建立的任何其他指令。
如果你點擊那個指令，你會看到那個檔案的所有內容，
你可以直接複製貼上到你自己的檔案中。
那麼讓我把這些全部貼上，然後我們慢慢帶你們走一遍。

15
00:05:50,800 --> 00:06:11,760
首先，我們在頂部有這個摘要，
告訴模型它將使用下面的使用者輸入為應用程式建立新的功能規格，
我們在下方說明這些輸入來自參數。
所以當我們之後執行 spec 指令時，
我們會加入一兩句關於我們想要規格化的新功能的描述，
讓模型可以使用這些輸入。
我們也告訴模型要遵守 claude.md 檔案中的任何設定。

16
00:06:12,480 --> 00:06:29,680
接著，往下這裡，我們詳細說明模型需要採取的步驟，
從以 Kebab Case 格式建立功能標題開始，
然後為功能建立一個安全的分支名稱，
最後在 specs 目錄中寫入詳細的 Markdown 規格，
這個目錄我們還沒有，但我們很快就會建立。

17
00:06:30,600 --> 00:06:52,800
在該大綱下方，我們更詳細地說明每個步驟，
從步驟一開始，即檢查當前分支是否有未提交或未暫存的變更。
如果有任何這樣的情況，
我們告訴模型中止整個流程，
並指示使用者先暫存或提交變更。
之後，我們告訴模型傳遞輸入參數，
以提取或得出以下值：功能標題、

18
00:06:53,400 --> 00:07:11,640
功能 slug，需遵循以下標準：
小寫字母、kebab case 格式、只含字母和數字、將空格替換為連字號，等等。
最後，一個安全的 Git 分支名稱，
格式為：claude 斜線 feature 斜線，然後接上 slug 的值，
我們在下方給出了一個範例。

19
00:07:12,520 --> 00:07:29,680
那麼，一旦模型提取出這些值後，
這裡的下一個步驟是讓 Claude Code 使用模型剛剛生成的分支名稱
切換到新的功能分支。
之後，我們要求模型使用剛剛生成的功能 slug
建立實際的規格 Markdown 檔案並儲存在 specs 資料夾中。

20
00:07:30,680 --> 00:07:46,960
我們也在這裡提到稍後將使用規劃模式來規劃規格，
我們會在本章後面討論規劃模式，
但除此之外，我們告訴模型使用這裡的規格範本檔案相同的結構
來建立規格檔案，
使用 @ 符號手動將那個範本檔案作為上下文加入。

21
00:07:47,320 --> 00:08:14,320
現在，我們還沒有建立那個範本檔案，但同樣地，我們很快就會建立。
我們也告訴模型不要添加任何技術實作細節，
例如程式碼範例，因為那是後續規劃步驟的工作。
最後，一旦規格建立完成，
我們要求模型回應一個簡短的摘要說明它做了什麼，
包括分支名稱、規格檔案位置和功能標題。
這樣 spec 指令就完成了。

22
00:08:14,960 --> 00:08:41,600
我們將在下一堂課中使用這個指令來規格化一個新功能，
但現在，我們需要做的就是建立那個 specs 資料夾，
所有新的規格檔案都會建立在其中。
我們還需要建立範本檔案，因為它要使用那個檔案來建立規格，對吧？
所以讓我們把這個打勾，
然後在根目錄建立一個叫做 specs 的新資料夾。
我在這裡使用底線的唯一原因是讓這個資料夾排在目錄樹的最上方，
沒有比這更深的含義了。

23
00:08:42,360 --> 00:09:09,360
在那個資料夾裡，我們現在要建立一個叫做 template.md 的新檔案，
我要直接貼入這個範本。它非常非常簡單，但我會帶你們看一遍。
頂部是功能名稱，然後是它選擇的分支名稱，
再往下這裡，我們說的是 Figma 元件（如果有使用的話）。
現在先不用太擔心這個部分。
在課程後面，我們會使用 Figma，並將它整合進 spec 指令中。
所以我們稍後會回來看這個，現在我們先不使用 Figma。

24
00:09:10,360 --> 00:09:34,480
無論如何，我們有這些不同的區塊，
我們希望 Claude Code 在建立這個規格檔案時填入。
我們有規格或功能的摘要、任何功能需求、
Figma 設計參考（僅在有參考的情況下），
同樣，現在先不用太擔心這個，我們稍後會回來看。
然後往下這裡，任何可能的邊緣情況、驗收標準、開放問題。
如果它有任何想問我們的問題，就放在那裡，然後我們可以進去

25
00:09:35,000 --> 00:09:52,000
並回答這些問題，然後底部是任何測試指南。
我在這裡也說了，為任何新功能在 test 資料夾中建立一個測試檔案，
並為以下情況建立有意義的測試，但不要過於繁重。
所以顯然，我不知道測試案例，
那是 Claude Code 在我們規格化新功能時自行決定的。

26
00:09:52,520 --> 00:10:04,800
好的，現在我們有了新的指令，這個 spec 指令，
以及這個範本，這樣當它建立規格時，就會使用這個範本。
在下一堂課中，讓我們為全新的功能建立一個新的規格。

