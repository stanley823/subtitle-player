1
00:00:01,760 --> 00:00:30,400
好的，在上一課中我們討論了 CLAUDE.md 檔案（也稱為記憶），Claude Code 在你要求它做某事時會用到它。之所以能這樣運作，是因為 CLAUDE.md 檔案會自動加入到任何 Claude Code 作業階段中，就像我們現在這個作業階段一樣。但當我們說「上下文」時，是什麼意思呢？就像與真實的人對話一樣，當你為提示詞提供額外的相關資訊或上下文時，AI 模型的回應會更加準確和恰當。

2
00:00:30,800 --> 00:00:58,480
想像一下，如果我在對話中突然對你說「香蕉」這個詞，沒有任何額外的上下文，你可能不知道該如何反應，多半會覺得我很奇怪。但如果我先說「我最喜歡的水果是香蕉」，那我就為這個詞加入了上下文，你可能還是覺得我奇怪，但至少你知道我說香蕉的原因，甚至可以說說自己最喜歡的水果。與 Claude Code 或任何其他 AI 聊天工具對話時也是同樣的道理。

3
00:00:59,360 --> 00:01:28,480
如果我直接告訴 Claude Code「修好這個連結」，它可能不知道從哪裡開始、我指的是哪個連結，甚至不知道連結哪裡出了問題。但如果我在提示詞中加入那個壞掉連結所在的特定檔案或元件作為上下文，Claude 就能更清楚地知道我在說什麼，結果也會好得多。因為它不需要掃描整個程式碼庫去尋找某個它不知道的壞連結，而是能立即在我們加入的上下文檔案中找到它。

4
00:01:28,880 --> 00:01:42,640
因此，我們可以透過 @ 符號加上檔案路徑，手動將檔案加入到 Claude Code 的上下文中。例如，我可以輸入 @src 然後加上斜線 components。

5
00:01:43,240 --> 00:02:01,600
然後再加上斜線 UI，輸入的同時你可以注意到下方出現了一些檔案選項，我可以用方向鍵循環切換來選擇檔案。我要選擇這個按鈕元件檔案，並按 Tab 鍵將它加入到聊天視窗中。好的，現在...

6
00:02:02,160 --> 00:02:30,000
在那個按鈕元件中，我們有不同的樣式變體，對吧？例如 primary、success、warning 等等。我想再新增兩個，也就是黑色和白色高對比變體。我要說：「新增一個黑底白字的黑色變體，和一個白底黑字的白色變體。」然後按 Enter。因為我們提供了該檔案作為上下文，它會知道去查看那個檔案中的樣式變體並加入新的。

7
00:02:30,800 --> 00:02:59,040
如果我們沒有加入上下文，它可能就不知道要在哪個檔案或元件中新增這些樣式變體。現在你可以看到它要求進行修改，我要接受。完成後開啟這個檔案，希望可以看到黑色和白色變體。讓我確認一下，喔，它又要求進行另一個修改，讓我按是來允許。現在開啟這個檔案，應該就能看到那兩個新的樣式變體了。

8
00:02:59,600 --> 00:03:23,840
另一種為 Claude Code 提供上下文的方式是，直接開啟你想要處理的檔案，並將游標放在檔案中的任何位置。這樣做後，你可以在聊天視窗下方看到該檔案名稱，表示它已被加入上下文。如果你關閉那個檔案，它仍然在那裡，因為游標在該檔案中仍處於活躍狀態。但如果你開啟一個新檔案並將游標移入其中，上下文也會跟著更新。

9
00:03:24,480 --> 00:03:43,680
這種方式一次只能加入一個檔案到上下文，但你可以在提示詞中多次使用 @ 符號來加入多個檔案。此外，你也可以在檔案中選取一段程式碼，Claude Code 就會專注於並以你選取的那一小段作為上下文，你也可以在聊天視窗下方看到選取了多少行。

10
00:03:45,280 --> 00:04:14,480
你也可以使用 @ 符號來參考 CLAUDE.md 檔案。例如，如果我想參考一個 Schema 檔案，讓 Claude 在處理資料模型時使用，我就可以這樣做，它就會將那個檔案載入到上下文中。或者我也可以在這裡參考一個測試設定檔，或任何我認為 Claude Code 在修改特定程式碼時應該了解的檔案。這就是我們使用 @ 符號或手動開啟檔案來加入上下文的方式。

11
00:04:15,040 --> 00:04:42,960
我們也可以將圖片加入作為上下文。我這裡有一張具有 3D 效果的按鈕圖片，我想讓 Claude Code 將這種 3D 效果套用到我們的按鈕上。我要做的是將這個按鈕圖片拖放到聊天作業階段中，現在它已被加入為上下文。接著我要貼上提示詞說：「你能更新按鈕設計嗎？」讓我再具體一點，說明是哪個元件中的按鈕設計。

12
00:04:44,800 --> 00:05:11,520
元件中的按鈕看起來更像圖片中的按鈕，加上 3D 效果，同時保留所有顏色變體。我也要在上下文中參考那個檔案，輸入 @src 然後進入 components 資料夾，接著選擇底部的按鈕檔案，按 Tab 將它也加入上下文，然後按 Enter。

13
00:05:12,320 --> 00:05:40,240
好的，我要允許它進行這些編輯，它又想再進行一些修改，我選是允許。好了，現在它改好了。在瀏覽器中可以看到那些按鈕看起來更有立體感了，3D 效果加上去了，我想它也加了一個從上到下的微妙漸層，真的做得很好。我們已經看到如何在提示詞中加入上下文，這本質上是為 Claude Code 提供了更多關於任何給定任務的資訊。

14
00:05:40,560 --> 00:06:10,440
因此，在需要時加入上下文非常重要。但是，加入過多不必要的上下文可能會導致結果不夠準確。在逐個提示詞的層面上，你可能不會故意這樣做，如果你在處理按鈕元件，你多半不會加入 50 個不相關的檔案作為上下文。然而，這種情況可能會在不知不覺中發生。讓我先解釋一下是如何發生的，然後我們再看看一些應對方法。試想我們正在開發購物車功能，我們提供 Claude Code 一堆

15
00:06:10,560 --> 00:06:38,880
在作業階段中跨多條訊息發送不同的提示詞和上下文檔案。那麼所有這些檔案和訊息，包括 AI 模型的回應，都儲存在當前聊天作業階段的上下文中。這意味著每次你發送新的提示詞時，Claude Code 都擁有整個聊天記錄，加上你手動加入的任何額外上下文，例如加入作為上下文的檔案。在我們開發這個功能的過程中，這是沒問題的，因為讓 Claude 了解那段歷史記錄可能很有用。

16
00:06:39,280 --> 00:06:54,800
以及它所做的修改。但試想我們接著因為購物車中的按鈕外觀不對勁而分心，開始要求 Claude Code 對按鈕元件進行 UI 修改，而這基本上是與購物車完全不同的事情。

17
00:06:55,360 --> 00:07:13,280
確實，我們可能會在那個區塊使用按鈕，但購物車頁面大體上與按鈕元件無關。所以，如果我們在這個聊天中開始處理按鈕元件，Claude Code 仍然會有之前關於購物車頁面的所有聊天和檔案上下文，而這些上下文在處理按鈕時幾乎毫無用處。

18
00:07:13,680 --> 00:07:38,160
我們實際上是在讓 Claude 讀取一堆在處理按鈕時無用的上下文，這可能會讓它感到困惑，甚至可能開始在購物車頁面上就地修改按鈕本身，而這並不是我們想要的。所以在與 Claude Code 一起開發功能時，最好的做法是保持上下文整潔，專注於當前任務，不要讓它被不必要的資訊塞爆。那麼我們如何應對這個問題呢？

19
00:07:38,880 --> 00:07:55,040
有幾種方式。首先，你可以使用 /exit 指令退出聊天，然後在終端機中輸入 claude 並按 Enter 開啟新的作業階段。在任何作業階段中，你也可以使用 /resume 指令恢復所有之前的作業階段，我稍後會示範這個功能。

20
00:07:55,680 --> 00:08:22,480
但如果你不想這樣做，想留在同一個作業階段中，你基本上有三個選項。你可以使用 /clear 指令，它會清除整個作業階段歷史記錄和上下文，恢復到原始狀態。它會保留 CLAUDE.md 檔案作為上下文，但你在聊天中手動加入的任何其他內容以及所有對話歷史記錄都會被清除。這就像刪除聊天並開始一個新的，如果你已完全完成一個任務並想進入下一個任務，這很有用。

21
00:08:23,040 --> 00:08:49,920
另一個選項是使用 /compact 指令。這會告訴 Claude 查看整個作業階段歷史記錄和上下文，將其壓縮成一個簡短的摘要，然後刪除其餘的內容。這個作業階段歷史記錄的簡短摘要會保留在作業階段上下文中，但其餘的都會被刪除，大幅減少上下文的量，將其壓縮到很小。我發現這在專注開發一個功能時很有用。

22
00:08:50,720 --> 00:09:01,760
但當作業階段開始變得很長且上下文膨脹時，我就可以繼續在同一個作業階段中開發同一個功能，使用那個壓縮摘要，它仍然會作為上下文保留在那裡。

23
00:09:02,240 --> 00:09:26,920
第三個選項是在聊天視窗中快速按兩下 Escape 鍵。這讓你可以回溯到作業階段中某個先前的時間點，從上下文中移除之後的所有聊天和檔案。這在你開發某個功能，但中途被一個錯誤或其他事情分心，想要從上下文的歷史記錄中剪掉最後那一段時很有用。

24
00:09:27,680 --> 00:09:52,720
這就是保持上下文整潔且聚焦的三種方式。現在讓我示範一下。首先，我們試試快按兩下 Escape，就像這樣，你可以看到我現在可以在聊天中回溯了。我之前清除過，所以你看到的是那個清除記錄，那是最開始的地方。你可以按 Enter 選擇任何一個時間點回溯到聊天的較早狀態。我要按 Escape 退出，因為我現在還不想這樣做。

25
00:09:53,440 --> 00:10:07,600
接下來我要試試 compact，我要使用 /compact 指令，你可以看到也可以在這裡加入額外的參數或說明，告訴它你希望如何進行壓縮。我不打算這樣做，直接按 Enter。

26
00:10:09,760 --> 00:10:33,200
你可以看到它在這裡建立了一個摘要，現在這個摘要就在我們的上下文中了。如果我們現在按兩下 Escape，你可以看到只剩下這個了，就是原始的那個和 /compact 指令。所以除了保留在作業階段中的這一小段上下文之外，所有歷史記錄都已被清除。

27
00:10:33,920 --> 00:10:50,880
好的，讓我按 Escape 退出，然後最後我要使用 /clear 指令，就像這樣，你可以看到這裡說「清除對話歷史記錄並釋放上下文」。我要按 Enter，這會刪除所有內容。現在如果我按兩下 Escape，你可以看到聊天中沒有任何歷史記錄了，太棒了！

28
00:10:51,360 --> 00:11:21,240
我也提到了一個選項是使用 /exit 然後按 Enter 退出當前聊天，這會終止作業階段，並讓你回到一般的終端機介面。如果你再次輸入 claude 並按 Enter 啟動 Claude，它會開始一個全新的聊天作業階段，除了 CLAUDE.md 檔案之外不加入任何上下文，讓你可以立即開始開發新功能。如果你想恢復之前的某個聊天作業階段，你可以使用

29
00:11:21,440 --> 00:11:51,280
/resume 指令然後按 Enter。這會顯示你在這個專案中所有進行中的 Claude Code 聊天作業階段，包括你上次使用那個作業階段的時間、其中有多少條訊息、它正在處理的分支，以及一個摘要。我可以選擇其中一個，然後回到那個聊天作業階段，所有之前的上下文都完整保留。關於上下文還有一件小事我想快速提一下，那就是「上下文視窗」，上下文視窗

30
00:11:51,400 --> 00:12:06,880
代表 AI 模型或工具一次可以處理多少上下文，以 token 為單位來衡量，我想一個 token 大約是一個詞中的 3 到 4 個字元。上下文視窗的大小通常因你在 Claude Code 中使用的工具或模型而有所不同。

31
00:12:07,400 --> 00:12:37,320
目前上下文視窗是 20 萬個 token，這是相當可觀的量。但如果你的作業階段持續很長時間，有大量手動加入的上下文和來回對話，那麼上下文視窗最終會被填滿。Claude Code 實際上也會在你快要達到這個限制時給你一個小提示。當這種情況發生時，我發現結果的品質會稍微下降。所以如果你的作業階段上下文開始有點膨脹，請記住我們可以用三種方式來減少它。

32
00:12:37,440 --> 00:13:01,760
快按兩下 Escape 以剪除最近的歷史記錄，回到聊天作業階段的某個先前時間點；使用 /compact 指令來摘要上下文並大幅減少它；或者使用 /clear 指令來完全清除整個上下文並重新開始。好了，我想關於上下文的介紹到此告一段落，在下一課我們將討論工具和權限。

